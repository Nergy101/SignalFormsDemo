<div class="form-container">
  <h1>Signal Forms Demo</h1>
  <p class="subtitle">Example person form using Angular Signal Forms</p>

  <form (submit)="onSubmit($event)" class="person-form" novalidate>
    <div class="form-group">
      <label for="name-input">
        <span class="label-content">
          <span class="icon icon-user" aria-hidden="true"></span>
          Name:
        </span>
        <div class="input-wrapper">
          <input
            id="name-input"
            type="text"
            [field]="personForm.name"
            [attr.aria-invalid]="
              personForm.name().touched() ? (personForm.name().invalid() ? 'true' : 'false') : null
            "
            [attr.aria-valid]="
              personForm.name().touched() && personForm.name().valid() ? 'true' : null
            "
            [attr.aria-describedby]="
              personForm.name().touched() && personForm.name().invalid() ? 'name-errors' : null
            "
          />
        </div>
      </label>
      @if (personForm.name().touched() && personForm.name().invalid()) {
        <ul id="name-errors" class="error-list" role="alert" aria-live="polite">
          @for (error of personForm.name().errors(); track error) {
            <li>{{ error.message }}</li>
          }
        </ul>
      }
    </div>

    <div class="form-group">
      <label for="age-input">
        <span class="label-content">
          <span class="icon icon-calendar" aria-hidden="true"></span>
          Age:
        </span>
        <div class="input-wrapper">
          <input
            id="age-input"
            type="number"
            [field]="personForm.age"
            [attr.aria-invalid]="
              personForm.age().touched() ? (personForm.age().invalid() ? 'true' : 'false') : null
            "
            [attr.aria-valid]="
              personForm.age().touched() && personForm.age().valid() ? 'true' : null
            "
            [attr.aria-describedby]="
              personForm.age().touched() && personForm.age().invalid() ? 'age-errors' : null
            "
          />
        </div>
      </label>
      @if (personForm.age().touched() && personForm.age().invalid()) {
        <ul id="age-errors" class="error-list" role="alert" aria-live="polite">
          @for (error of personForm.age().errors(); track error) {
            <li>{{ error.message }}</li>
          }
        </ul>
      }
    </div>

    <button type="submit" [disabled]="personForm().invalid()">
      <span>Submit</span>
      <span class="icon icon-arrow-right" aria-hidden="true"></span>
    </button>
  </form>

  <div class="form-info">
    <h2>Form State</h2>
    <div class="info-grid">
      <div><strong>Name:</strong> {{ personForm.name().value() }}</div>
      <div><strong>Age:</strong> {{ personForm.age().value() }}</div>
      <div><strong>Name Valid:</strong> {{ personForm.name().valid() }}</div>
      <div><strong>Age Valid:</strong> {{ personForm.age().valid() }}</div>
      <div><strong>Name Touched:</strong> {{ personForm.name().touched() }}</div>
      <div><strong>Age Touched:</strong> {{ personForm.age().touched() }}</div>
      <div><strong>Name Dirty:</strong> {{ personForm.name().dirty() }}</div>
      <div><strong>Age Dirty:</strong> {{ personForm.age().dirty() }}</div>
    </div>
  </div>
</div>

<router-outlet />
